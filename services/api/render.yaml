services:
  - type: web
    name: zorem-api
    env: node
    plan: free  # Cambia a 'starter' ($7/mes) para mejor rendimiento en producción
    buildCommand: cd services/api && npm install
    startCommand: cd services/api && npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: JWT_SECRET
        generateValue: true
      - key: FRONTEND_URL
        value: https://zorem.link  # Actualiza con tu URL real
      - key: CORS_ORIGIN
        value: https://zorem.link  # Actualiza con tu URL real
      # DATABASE_URL se agrega automáticamente si conectas PostgreSQL como add-on
      # Las demás variables (storage, etc.) las agregas manualmente en el dashboard
      # Auth + Email (Resend)
      # - RESEND_API_KEY
      # - RESEND_FROM_EMAIL=Zorem <noreply@zorem.link>
      # Google OAuth
      # - GOOGLE_CLIENT_ID
      # - GOOGLE_CLIENT_SECRET
      # - GOOGLE_REDIRECT_URI=https://api.zorem.link/api/auth/google/callback
      # Ver DEPLOYMENT.md para la lista completa de variables

databases:
  - name: zorem-db
    plan: free  # Cambia a 'starter' ($7/mes) para mejor rendimiento
    databaseName: zorem
    user: zorem
